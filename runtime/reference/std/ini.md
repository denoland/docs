---
title: "@std/ini"
description: "Parsing and serializing of INI files"
jsr: jsr:@std/ini
pkg: ini
version: 0.225.2
generated: true
stability: unstable
---
<!-- Autogenerated from JSR docs. Do not edit directly. -->

> ⚠️ **Unstable**: This @std package is experimental and its API may change without a major version bump.

## Overview

<p><a href="/@std/ini@0.225.2/doc/~/parse" rel="nofollow"><code>parse</code></a> and <a href="/@std/ini@0.225.2/doc/~/stringify" rel="nofollow"><code>stringify</code></a> for handling
<a href="https://en.wikipedia.org/wiki/INI_file" rel="nofollow">INI</a> encoded data, such as the
<a href="https://specifications.freedesktop.org/desktop-entry-spec/latest/ar01s03.html" rel="nofollow">Desktop Entry specification</a>.
Values are parsed as strings by default to preserve data parity from the original.
Customization is possible in the form of reviver/replacer functions like those in <code>JSON.parse</code> and <code>JSON.stringify</code>.
Nested sections, repeated key names within a section, and key/value arrays are not supported,
but will be preserved when using <a href="/@std/ini@0.225.2/doc/~/IniMap" rel="nofollow"><code>IniMap</code></a>. Multi-line values are not supported and will throw a syntax error.
White space padding and lines starting with '#', ';', or '//' will be treated as comments.</p>
<pre class="highlight"><code><span class="pl-k">import</span> <span class="pl-c1">*</span> <span class="pl-k">as</span> ini <span class="pl-k">from</span> <span class="pl-s">"@std/ini"</span>;
<span class="pl-k">import</span> { assertEquals } <span class="pl-k">from</span> <span class="pl-s">"@std/assert"</span>;

<span class="pl-k">const</span> iniFile <span class="pl-c1">=</span> <span class="pl-s">`# Example configuration file</span>
<span class="pl-s">Global Key=Some data here</span>
<span class="pl-s"></span>
<span class="pl-s">[Section #1]</span>
<span class="pl-s">Section Value=42</span>
<span class="pl-s">Section Date=1977-05-25`</span>;

<span class="pl-k">const</span> parsed <span class="pl-c1">=</span> ini.<span class="pl-en">parse</span>(iniFile, {
  <span class="pl-en">reviver</span>(key, value, section) {
    <span class="pl-k">if</span> (section <span class="pl-c1">===</span> <span class="pl-s">"Section #1"</span>) {
      <span class="pl-k">if</span> (key <span class="pl-c1">===</span> <span class="pl-s">"Section Value"</span>) <span class="pl-k">return</span> <span class="pl-smi">Number</span>(value);
      <span class="pl-k">if</span> (key <span class="pl-c1">===</span> <span class="pl-s">"Section Date"</span>) <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Date</span>(value);
    }
    <span class="pl-k">return</span> value;
  },
});

<span class="pl-en">assertEquals</span>(parsed, {
  <span class="pl-s">"Global Key"</span>: <span class="pl-s">"Some data here"</span>,
  <span class="pl-s">"Section #1"</span>: {
    <span class="pl-s">"Section Value"</span>: <span class="pl-c1">42</span>,
    <span class="pl-s">"Section Date"</span>: <span class="pl-k">new</span> <span class="pl-smi">Date</span>(<span class="pl-s">"1977-05-25T00:00:00.000Z"</span>),
  },
});

<span class="pl-k">const</span> text <span class="pl-c1">=</span> ini.<span class="pl-en">stringify</span>(parsed, {
  <span class="pl-en">replacer</span>(key, value, section) {
    <span class="pl-k">if</span> (section <span class="pl-c1">===</span> <span class="pl-s">"Section #1"</span> <span class="pl-c1">&amp;&amp;</span> key <span class="pl-c1">===</span> <span class="pl-s">"Section Date"</span>) {
      <span class="pl-k">return</span> (value <span class="pl-k">as</span> <span class="pl-smi">Date</span>).<span class="pl-en">toISOString</span>().<span class="pl-en">split</span>(<span class="pl-s">"T"</span>)[<span class="pl-c1">0</span>];
    }
    <span class="pl-k">return</span> value;
  },
});

<span class="pl-en">assertEquals</span>(text, <span class="pl-s">`Global Key=Some data here</span>
<span class="pl-s">[Section #1]</span>
<span class="pl-s">Section Value=42</span>
<span class="pl-s">Section Date=1977-05-25`</span>);
</code></pre>
<p>Optionally, <a href="/@std/ini@0.225.2/doc/~/IniMap" rel="nofollow"><code>IniMap</code></a> may be used for finer INI handling. Using this class will permit preserving
comments, accessing values like a map, iterating over key/value/section entries, and more.</p>
<pre class="highlight"><code><span class="pl-k">import</span> { <span class="pl-smi">IniMap</span> } <span class="pl-k">from</span> <span class="pl-s">"@std/ini/ini-map"</span>;
<span class="pl-k">import</span> { assertEquals } <span class="pl-k">from</span> <span class="pl-s">"@std/assert"</span>;

<span class="pl-k">const</span> ini <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">IniMap</span>();
ini.<span class="pl-en">set</span>(<span class="pl-s">"section1"</span>, <span class="pl-s">"keyA"</span>, <span class="pl-c1">100</span>);
<span class="pl-en">assertEquals</span>(ini.<span class="pl-en">toString</span>(), <span class="pl-s">`[section1]</span>
<span class="pl-s">keyA=100`</span>);

ini.<span class="pl-en">set</span>(<span class="pl-s">'keyA'</span>, <span class="pl-c1">25</span>)
<span class="pl-en">assertEquals</span>(ini.<span class="pl-en">toObject</span>(), {
  <span class="pl-c1">keyA</span>: <span class="pl-c1">25</span>,
  <span class="pl-c1">section1</span>: {
    <span class="pl-c1">keyA</span>: <span class="pl-c1">100</span>
  }
});
</code></pre>
<p>The reviver and replacer APIs can be used to extend the behavior of IniMap, such as adding support
for duplicate keys as if they were arrays of values.</p>
<pre class="highlight"><code><span class="pl-k">import</span> { <span class="pl-smi">IniMap</span> } <span class="pl-k">from</span> <span class="pl-s">"@std/ini/ini-map"</span>;
<span class="pl-k">import</span> { assertEquals } <span class="pl-k">from</span> <span class="pl-s">"@std/assert"</span>;

<span class="pl-k">const</span> iniFile <span class="pl-c1">=</span> <span class="pl-s">`# Example of key/value arrays</span>
<span class="pl-s">[section1]</span>
<span class="pl-s">key1=This key</span>
<span class="pl-s">key1=is non-standard</span>
<span class="pl-s">key1=but can be captured!`</span>;

<span class="pl-k">const</span> ini <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">IniMap</span>({ <span class="pl-c1">assignment</span>: <span class="pl-s">"="</span>, <span class="pl-c1">deduplicate</span>: <span class="pl-c1">true</span> });
ini.<span class="pl-en">parse</span>(iniFile, (key, value, section) <span class="pl-c1">=&gt;</span> {
  <span class="pl-k">if</span> (section) {
    <span class="pl-k">if</span> (ini.<span class="pl-en">has</span>(section, key)) {
      <span class="pl-k">const</span> exists <span class="pl-c1">=</span> ini.<span class="pl-en">get</span>(section, key);
      <span class="pl-k">if</span> (<span class="pl-smi">Array</span>.<span class="pl-en">isArray</span>(exists)) {
        exists.<span class="pl-en">push</span>(value);
        <span class="pl-k">return</span> exists;
      } <span class="pl-k">else</span> {
        <span class="pl-k">return</span> [exists, value];
      }
    }
  }
  <span class="pl-k">return</span> value;
});

<span class="pl-en">assertEquals</span>(
  ini.<span class="pl-en">get</span>(<span class="pl-s">"section1"</span>, <span class="pl-s">"key1"</span>),
  [<span class="pl-s">"This key"</span>, <span class="pl-s">"is non-standard"</span>, <span class="pl-s">"but can be captured!"</span>]
);

<span class="pl-k">const</span> result <span class="pl-c1">=</span> ini.<span class="pl-en">toString</span>((key, value) <span class="pl-c1">=&gt;</span> {
  <span class="pl-k">if</span> (<span class="pl-smi">Array</span>.<span class="pl-en">isArray</span>(value)) {
    <span class="pl-k">return</span> value.<span class="pl-en">join</span>(
      <span class="pl-s">`<span class="pl-s1">${ini.<span class="pl-c1">formatting</span>.<span class="pl-c1">lineBreak</span>}</span><span class="pl-s1">${key}</span><span class="pl-s1">${ini.<span class="pl-c1">formatting</span>.<span class="pl-c1">assignment</span>}</span>`</span>,
    );
  }
  <span class="pl-k">return</span> value;
});

<span class="pl-en">assertEquals</span>(result, iniFile);
</code></pre>

<!-- custom:start -->
<!-- Add persistent custom content below. This section is preserved across generations. -->
<!-- custom:end -->
