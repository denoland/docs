---
title: "@std/csv"
description: "Reading and writing of comma-separated values (CSV) files"
jsr: jsr:@std/csv
pkg: csv
version: 1.0.6
generated: true
stability: stable
---
<!-- Autogenerated from JSR docs. Do not edit directly. -->

## Overview

<p>Reads and writes comma-separated values (CSV) files.</p>
<h2 id="parsing-csv">
Parsing CSV</h2>
<pre class="highlight"><code><span class="pl-k">import</span> { parse } <span class="pl-k">from</span> <span class="pl-s">"@std/csv/parse"</span>;
<span class="pl-k">import</span> { assertEquals } <span class="pl-k">from</span> <span class="pl-s">"@std/assert"</span>;

<span class="pl-k">const</span> string <span class="pl-c1">=</span> <span class="pl-s">"a,b,c\nd,e,f"</span>;

<span class="pl-c">// Parse as array of arrays (default)</span>
<span class="pl-en">assertEquals</span>(<span class="pl-en">parse</span>(string, { <span class="pl-c1">skipFirstRow</span>: <span class="pl-c1">false</span> }), [[<span class="pl-s">"a"</span>, <span class="pl-s">"b"</span>, <span class="pl-s">"c"</span>], [<span class="pl-s">"d"</span>, <span class="pl-s">"e"</span>, <span class="pl-s">"f"</span>]]);

<span class="pl-c">// Parse csv file with headers into array of objects</span>
<span class="pl-en">assertEquals</span>(<span class="pl-en">parse</span>(string, { <span class="pl-c1">skipFirstRow</span>: <span class="pl-c1">true</span> }), [{ <span class="pl-c1">a</span>: <span class="pl-s">"d"</span>, <span class="pl-c1">b</span>: <span class="pl-s">"e"</span>, <span class="pl-c1">c</span>: <span class="pl-s">"f"</span> }]);

<span class="pl-c">// Parse with custom column names</span>
<span class="pl-en">assertEquals</span>(<span class="pl-en">parse</span>(string, { <span class="pl-c1">columns</span>: [<span class="pl-s">"x"</span>, <span class="pl-s">"y"</span>, <span class="pl-s">"z"</span>] }), [
  { <span class="pl-c1">x</span>: <span class="pl-s">"a"</span>, <span class="pl-c1">y</span>: <span class="pl-s">"b"</span>, <span class="pl-c1">z</span>: <span class="pl-s">"c"</span> },
  { <span class="pl-c1">x</span>: <span class="pl-s">"d"</span>, <span class="pl-c1">y</span>: <span class="pl-s">"e"</span>, <span class="pl-c1">z</span>: <span class="pl-s">"f"</span> }
]);

<span class="pl-c">// Parse tab-separated values</span>
<span class="pl-k">const</span> tsvString <span class="pl-c1">=</span> <span class="pl-s">"name\tage\tcity\njohn\t30\tnew york\nmary\t25\tlos angeles"</span>;
<span class="pl-en">assertEquals</span>(<span class="pl-en">parse</span>(tsvString, { <span class="pl-c1">separator</span>: <span class="pl-s">"\t"</span>, <span class="pl-c1">skipFirstRow</span>: <span class="pl-c1">true</span> }), [
  { <span class="pl-c1">name</span>: <span class="pl-s">"john"</span>, <span class="pl-c1">age</span>: <span class="pl-s">"30"</span>, <span class="pl-c1">city</span>: <span class="pl-s">"new york"</span> },
  { <span class="pl-c1">name</span>: <span class="pl-s">"mary"</span>, <span class="pl-c1">age</span>: <span class="pl-s">"25"</span>, <span class="pl-c1">city</span>: <span class="pl-s">"los angeles"</span> }
]);

<span class="pl-c">// Parse a CSV file which has comments</span>
<span class="pl-k">const</span> csvWithComments <span class="pl-c1">=</span> <span class="pl-s">"# This is a comment\nname,age,city\n# Another comment\njohn,30,new york\nmary,25,los angeles"</span>;
<span class="pl-en">assertEquals</span>(<span class="pl-en">parse</span>(csvWithComments, { <span class="pl-c1">comment</span>: <span class="pl-s">"#"</span>, <span class="pl-c1">skipFirstRow</span>: <span class="pl-c1">true</span> }), [
  { <span class="pl-c1">name</span>: <span class="pl-s">"john"</span>, <span class="pl-c1">age</span>: <span class="pl-s">"30"</span>, <span class="pl-c1">city</span>: <span class="pl-s">"new york"</span> },
  { <span class="pl-c1">name</span>: <span class="pl-s">"mary"</span>, <span class="pl-c1">age</span>: <span class="pl-s">"25"</span>, <span class="pl-c1">city</span>: <span class="pl-s">"los angeles"</span> }
]);
</code></pre>
<h2 id="parsing-csv-from-a-stream">
Parsing CSV from a Stream</h2>
<pre class="highlight"><code><span class="pl-k">import</span> { <span class="pl-smi">CsvParseStream</span> } <span class="pl-k">from</span> <span class="pl-s">"@std/csv/parse-stream"</span>;
<span class="pl-k">import</span> { assertEquals } <span class="pl-k">from</span> <span class="pl-s">"@std/assert"</span>;

<span class="pl-c">// Parse from a stream (useful for large files)</span>
<span class="pl-k">const</span> source <span class="pl-c1">=</span> <span class="pl-smi">ReadableStream</span>.<span class="pl-en">from</span>([
  <span class="pl-s">"name,age,city\n"</span>,
  <span class="pl-s">"john,30,new york\n"</span>,
  <span class="pl-s">"mary,25,los angeles\n"</span>
]);

<span class="pl-k">const</span> csvStream <span class="pl-c1">=</span> source
  .<span class="pl-en">pipeThrough</span>(<span class="pl-k">new</span> <span class="pl-smi">CsvParseStream</span>({ <span class="pl-c1">skipFirstRow</span>: <span class="pl-c1">true</span> }));

<span class="pl-k">const</span> records <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-smi">Array</span>.<span class="pl-en">fromAsync</span>(csvStream);
<span class="pl-en">assertEquals</span>(records, [
  { <span class="pl-c1">name</span>: <span class="pl-s">"john"</span>, <span class="pl-c1">age</span>: <span class="pl-s">"30"</span>, <span class="pl-c1">city</span>: <span class="pl-s">"new york"</span> },
  { <span class="pl-c1">name</span>: <span class="pl-s">"mary"</span>, <span class="pl-c1">age</span>: <span class="pl-s">"25"</span>, <span class="pl-c1">city</span>: <span class="pl-s">"los angeles"</span> }
]);

<span class="pl-c">// Or process records one by one</span>
<span class="pl-c">// for await (const record of csvStream) {</span>
<span class="pl-c">//   console.log(record);</span>
<span class="pl-c">// }</span>
</code></pre>
<h2 id="stringifying-data-to-csv">
Stringifying Data to CSV</h2>
<pre class="highlight"><code><span class="pl-k">import</span> { stringify } <span class="pl-k">from</span> <span class="pl-s">"@std/csv/stringify"</span>;
<span class="pl-k">import</span> { assertEquals } <span class="pl-k">from</span> <span class="pl-s">"@std/assert"</span>;

<span class="pl-c">// Convert array of arrays to CSV</span>
<span class="pl-k">const</span> arrayData <span class="pl-c1">=</span> [[<span class="pl-s">"name"</span>, <span class="pl-s">"age"</span>, <span class="pl-s">"city"</span>], [<span class="pl-s">"john"</span>, <span class="pl-s">"30"</span>, <span class="pl-s">"new york"</span>], [<span class="pl-s">"mary"</span>, <span class="pl-s">"25"</span>, <span class="pl-s">"los angeles"</span>]];
<span class="pl-k">const</span> csvString <span class="pl-c1">=</span> <span class="pl-en">stringify</span>(arrayData);
<span class="pl-en">assertEquals</span>(csvString, <span class="pl-s">"name,age,city\r\njohn,30,new york\r\nmary,25,los angeles\r\n"</span>);

<span class="pl-c">// Convert array of objects to CSV</span>
<span class="pl-k">const</span> objectData <span class="pl-c1">=</span> [
  { <span class="pl-c1">name</span>: <span class="pl-s">"john"</span>, <span class="pl-c1">age</span>: <span class="pl-s">"30"</span>, <span class="pl-c1">city</span>: <span class="pl-s">"new york"</span> },
  { <span class="pl-c1">name</span>: <span class="pl-s">"mary"</span>, <span class="pl-c1">age</span>: <span class="pl-s">"25"</span>, <span class="pl-c1">city</span>: <span class="pl-s">"los angeles"</span> }
];

<span class="pl-c">// When using an array of objects, you must specify columns to use</span>
<span class="pl-k">const</span> customColumns <span class="pl-c1">=</span> <span class="pl-en">stringify</span>(objectData, { <span class="pl-c1">columns</span>: [<span class="pl-s">"city"</span>, <span class="pl-s">"name"</span>, <span class="pl-s">"age"</span>] });
<span class="pl-en">assertEquals</span>(customColumns, <span class="pl-s">"city,name,age\r\nnew york,john,30\r\nlos angeles,mary,25\r\n"</span>);
</code></pre>
<h2 id="streaming-stringify-data-to-csv">
Streaming Stringify Data to CSV</h2>
<pre class="highlight"><code><span class="pl-k">import</span> { <span class="pl-smi">CsvStringifyStream</span> } <span class="pl-k">from</span> <span class="pl-s">"@std/csv/stringify-stream"</span>;
<span class="pl-k">import</span> { assertEquals } <span class="pl-k">from</span> <span class="pl-s">"@std/assert"</span>;

<span class="pl-k">async</span> <span class="pl-k">function</span> <span class="pl-en">writeCsvToTempFile</span>(): <span class="pl-smi">Promise</span>&lt;<span class="pl-smi">string</span>&gt; {
  <span class="pl-k">const</span> path <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-smi">Deno</span>.<span class="pl-en">makeTempFile</span>();
  using file <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-smi">Deno</span>.<span class="pl-en">open</span>(path, { <span class="pl-c1">write</span>: <span class="pl-c1">true</span> });

  <span class="pl-k">const</span> readable <span class="pl-c1">=</span> <span class="pl-smi">ReadableStream</span>.<span class="pl-en">from</span>([
    { <span class="pl-c1">id</span>: <span class="pl-c1">1</span>, <span class="pl-c1">name</span>: <span class="pl-s">"one"</span> },
    { <span class="pl-c1">id</span>: <span class="pl-c1">2</span>, <span class="pl-c1">name</span>: <span class="pl-s">"two"</span> },
    { <span class="pl-c1">id</span>: <span class="pl-c1">3</span>, <span class="pl-c1">name</span>: <span class="pl-s">"three"</span> },
  ]);

  <span class="pl-k">await</span> readable
    .<span class="pl-en">pipeThrough</span>(<span class="pl-k">new</span> <span class="pl-smi">CsvStringifyStream</span>({ <span class="pl-c1">columns</span>: [<span class="pl-s">"id"</span>, <span class="pl-s">"name"</span>] }))
    .<span class="pl-en">pipeThrough</span>(<span class="pl-k">new</span> <span class="pl-smi">TextEncoderStream</span>())
    .<span class="pl-en">pipeTo</span>(file.<span class="pl-c1">writable</span>);

  <span class="pl-k">return</span> path;
}

<span class="pl-k">const</span> path <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-en">writeCsvToTempFile</span>();
<span class="pl-k">const</span> content <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-smi">Deno</span>.<span class="pl-en">readTextFile</span>(path);
<span class="pl-en">assertEquals</span>(content, <span class="pl-s">"id,name\r\n1,one\r\n2,two\r\n3,three\r\n"</span>);
</code></pre>
<h2 id="csv-format-information">
CSV Format Information</h2>
<p>There are many kinds of CSV files; this module supports the format described
in <a href="https://www.rfc-editor.org/rfc/rfc4180.html" rel="nofollow">RFC 4180</a>.</p>
<p>A csv file contains zero or more records of one or more fields per record.
Each record is separated by the newline character. The final record may
optionally be followed by a newline character.</p>
<pre class="highlight"><code>field1,field2,field3
</code></pre>
<p>White space is considered part of a field.</p>
<p>Carriage returns before newline characters are silently removed.</p>
<p>Blank lines are ignored. A line with only whitespace characters (excluding
the ending newline character) is not considered a blank line.</p>
<p>Fields which start and stop with the quote character " are called
quoted-fields. The beginning and ending quote are not part of the field.</p>
<p>The source:</p>
<pre class="highlight"><code>normal string,"quoted-field"
</code></pre>
<p>results in the fields</p>
<pre class="highlight"><code>[<span class="pl-s">`normal string`</span>, <span class="pl-s">`quoted-field`</span>]
</code></pre>
<p>Within a quoted-field a quote character followed by a second quote character is considered a single quote.</p>
<pre class="highlight"><code>"the ""word"" is true","a ""quoted-field"""
</code></pre>
<p>results in</p>
<pre class="highlight"><code>[<span class="pl-s">`the "word" is true`</span>, <span class="pl-s">`a "quoted-field"`</span>]
</code></pre>
<p>Newlines and commas may be included in a quoted-field</p>
<pre class="highlight"><code>"Multi-line
field","comma is ,"
</code></pre>
<p>results in</p>
<pre class="highlight"><code>[<span class="pl-s">`Multi-line</span>
<span class="pl-s">field`</span>, <span class="pl-s">`comma is ,`</span>]
</code></pre>

<!-- custom:start -->
<!-- Add persistent custom content below. This section is preserved across generations. -->
<!-- custom:end -->
