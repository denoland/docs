---
title: "@std/http"
description: "Utilities for building HTTP servers"
jsr: jsr:@std/http
pkg: http
version: 1.0.21
generated: true
stability: stable
---
<!-- Autogenerated from JSR docs. Do not edit directly. -->

## Overview

<p>Provides user-friendly <code>serve</code> on top of Deno's native HTTP server
and other utilities for creating HTTP servers and clients.</p>
<h2 id="file-server">
File Server</h2>
<p>A small program for serving local files over HTTP.</p>
<pre class="highlight"><code><span class="pl-en">deno</span> run <span class="pl-c1">--allow-net</span> <span class="pl-c1">--allow-read</span> jsr:@std/http/file-server
<span class="pl-en">Listening</span> on:
<span class="pl-c1">-</span> Local: http://localhost:8000
</code><button class="copyButton" data-copy="deno run --allow-net --allow-read jsr:@std/http/file-server
Listening on:
- Local: http://localhost:8000
"><svg class="copy" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="2" y="2" width="7" height="7" fill="none"></rect>
  <rect x="6" y="6" width="7" height="7" fill="none"></rect>
  <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="currentColor"></path>
</svg>
<svg class="check" width="15" height="15" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <path d="M5 12l5 5l10 -10"></path>
</svg>
</button><code></code></pre>
<p>When the <code>--allow-sys=networkInterfaces</code> permission is provided, the file
server will also display the local area network addresses that can be used to
access the server.</p>
<h2 id="http-status-code-and-status-text">
HTTP Status Code and Status Text</h2>
<p>Helper for processing status code and status text.</p>
<h2 id="http-errors">
HTTP errors</h2>
<p>Provides error classes for each HTTP error status code as well as utility
functions for handling HTTP errors in a structured way.</p>
<h2 id="methods">
Methods</h2>
<p>Provides helper functions and types to work with HTTP method strings safely.</p>
<h2 id="negotiation">
Negotiation</h2>
<p>A set of functions which can be used to negotiate content types, encodings and
languages when responding to requests.</p>
<blockquote>
<p>Note: some libraries include accept charset functionality by analyzing the
<code>Accept-Charset</code> header. This is a legacy header that
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Charset" rel="nofollow">clients omit and servers should ignore</a>
therefore is not provided.</p>
</blockquote>
<h2 id="user-agent-handling">
User agent handling</h2>
<p>The <a href="/@std/http@1.0.21/doc/~/UserAgent" rel="nofollow"><code>UserAgent</code></a> class provides user agent string parsing, allowing
a user agent flag to be semantically understood.</p>
<p>For example to integrate the user agent provided in the header <code>User-Agent</code>
in an http request would look like this:</p>
<pre class="highlight"><code><span class="pl-k">import</span> { <span class="pl-smi">UserAgent</span> } <span class="pl-k">from</span> <span class="pl-s">"@std/http/user-agent"</span>;

<span class="pl-smi">Deno</span>.<span class="pl-en">serve</span>((req) <span class="pl-c1">=&gt;</span> {
  <span class="pl-k">const</span> userAgent <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-smi">UserAgent</span>(req.<span class="pl-c1">headers</span>.<span class="pl-en">get</span>(<span class="pl-s">"user-agent"</span>) <span class="pl-c1">??</span> <span class="pl-s">""</span>);
  <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Response</span>(<span class="pl-s">`Hello, <span class="pl-s1">${userAgent.<span class="pl-c1">browser</span>.<span class="pl-c1">name</span>}</span></span>
<span class="pl-s">    on <span class="pl-s1">${userAgent.<span class="pl-c1">os</span>.<span class="pl-c1">name</span>}</span> <span class="pl-s1">${userAgent.<span class="pl-c1">os</span>.<span class="pl-c1">version</span>}</span>!`</span>);
});
</code><button class="copyButton" data-copy="import { UserAgent } from &quot;@std/http/user-agent&quot;;

Deno.serve((req) => {
  const userAgent = new UserAgent(req.headers.get(&quot;user-agent&quot;) ?? &quot;&quot;);
  return new Response(`Hello, ${userAgent.browser.name}
    on ${userAgent.os.name} ${userAgent.os.version}!`);
});
"><svg class="copy" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="2" y="2" width="7" height="7" fill="none"></rect>
  <rect x="6" y="6" width="7" height="7" fill="none"></rect>
  <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="currentColor"></path>
</svg>
<svg class="check" width="15" height="15" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <path d="M5 12l5 5l10 -10"></path>
</svg>
</button><code></code></pre>
<h3 id="routing">
Routing</h3>
<p><code>route</code> provides an easy way to route requests to different
handlers based on the request path and method.</p>
<pre class="highlight"><code><span class="pl-k">import</span> { route, <span class="pl-k">type</span> <span class="pl-smi">Route</span> } <span class="pl-k">from</span> <span class="pl-s">"@std/http/unstable-route"</span>;
<span class="pl-k">import</span> { serveDir } <span class="pl-k">from</span> <span class="pl-s">"@std/http/file-server"</span>;

<span class="pl-k">const</span> routes: <span class="pl-smi">Route</span>[] <span class="pl-c1">=</span> [
  {
    <span class="pl-c1">pattern</span>: <span class="pl-k">new</span> <span class="pl-smi">URLPattern</span>({ <span class="pl-c1">pathname</span>: <span class="pl-s">"/about"</span> }),
    <span class="pl-en">handler</span>: () <span class="pl-c1">=&gt;</span> <span class="pl-k">new</span> <span class="pl-smi">Response</span>(<span class="pl-s">"About page"</span>),
  },
  {
    <span class="pl-c1">pattern</span>: <span class="pl-k">new</span> <span class="pl-smi">URLPattern</span>({ <span class="pl-c1">pathname</span>: <span class="pl-s">"/users/:id"</span> }),
    <span class="pl-en">handler</span>: (_req, _info, params) <span class="pl-c1">=&gt;</span> <span class="pl-k">new</span> <span class="pl-smi">Response</span>(params?.<span class="pl-c1">pathname</span>.<span class="pl-c1">groups</span>.<span class="pl-c1">id</span>),
  },
  {
    <span class="pl-c1">pattern</span>: <span class="pl-k">new</span> <span class="pl-smi">URLPattern</span>({ <span class="pl-c1">pathname</span>: <span class="pl-s">"/static/*"</span> }),
    <span class="pl-en">handler</span>: (req: <span class="pl-smi">Request</span>) <span class="pl-c1">=&gt;</span> <span class="pl-en">serveDir</span>(req)
  },
  {
    <span class="pl-c1">method</span>: [<span class="pl-s">"GET"</span>, <span class="pl-s">"HEAD"</span>],
    <span class="pl-c1">pattern</span>: <span class="pl-k">new</span> <span class="pl-smi">URLPattern</span>({ <span class="pl-c1">pathname</span>: <span class="pl-s">"/api"</span> }),
    <span class="pl-en">handler</span>: (req: <span class="pl-smi">Request</span>) <span class="pl-c1">=&gt;</span> <span class="pl-k">new</span> <span class="pl-smi">Response</span>(req.<span class="pl-c1">method</span> <span class="pl-c1">===</span> <span class="pl-s">'HEAD'</span> ? <span class="pl-c1">null</span> : <span class="pl-s">'ok'</span>),
  },
];

<span class="pl-k">function</span> <span class="pl-en">defaultHandler</span>(_req: <span class="pl-smi">Request</span>) {
  <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Response</span>(<span class="pl-s">"Not found"</span>, { <span class="pl-c1">status</span>: <span class="pl-c1">404</span> });
}

<span class="pl-smi">Deno</span>.<span class="pl-en">serve</span>(<span class="pl-en">route</span>(routes, defaultHandler));
</code><button class="copyButton" data-copy="import { route, type Route } from &quot;@std/http/unstable-route&quot;;
import { serveDir } from &quot;@std/http/file-server&quot;;

const routes: Route[] = [
  {
    pattern: new URLPattern({ pathname: &quot;/about&quot; }),
    handler: () => new Response(&quot;About page&quot;),
  },
  {
    pattern: new URLPattern({ pathname: &quot;/users/:id&quot; }),
    handler: (_req, _info, params) => new Response(params?.pathname.groups.id),
  },
  {
    pattern: new URLPattern({ pathname: &quot;/static/*&quot; }),
    handler: (req: Request) => serveDir(req)
  },
  {
    method: [&quot;GET&quot;, &quot;HEAD&quot;],
    pattern: new URLPattern({ pathname: &quot;/api&quot; }),
    handler: (req: Request) => new Response(req.method === 'HEAD' ? null : 'ok'),
  },
];

function defaultHandler(_req: Request) {
  return new Response(&quot;Not found&quot;, { status: 404 });
}

Deno.serve(route(routes, defaultHandler));
"><svg class="copy" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="2" y="2" width="7" height="7" fill="none"></rect>
  <rect x="6" y="6" width="7" height="7" fill="none"></rect>
  <path d="M1.55566 2.7C1.55566 2.03726 2.09292 1.5 2.75566 1.5H8.75566C9.41841 1.5 9.95566 2.03726 9.95566 2.7V5.1H12.3557C13.0184 5.1 13.5557 5.63726 13.5557 6.3V12.3C13.5557 12.9627 13.0184 13.5 12.3557 13.5H6.35566C5.69292 13.5 5.15566 12.9627 5.15566 12.3V9.9H2.75566C2.09292 9.9 1.55566 9.36274 1.55566 8.7V2.7ZM6.35566 9.9V12.3H12.3557V6.3H9.95566V8.7C9.95566 9.36274 9.41841 9.9 8.75566 9.9H6.35566ZM8.75566 8.7V2.7H2.75566V8.7H8.75566Z" fill="currentColor"></path>
</svg>
<svg class="check" width="15" height="15" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
  <path d="M5 12l5 5l10 -10"></path>
</svg>
</button><code></code></pre>
